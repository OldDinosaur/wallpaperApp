"use strict";const e=require("../common/vendor.js"),o=(o,t="GET",a={},n={})=>new Promise(((l,s)=>{n.Authorization=e.index.getStorageSync("token"),e.index.request({url:o,method:t,data:a,header:n,success:o=>{401==o.data.code&&e.index.reLaunch({url:"/pages/login/login"}),l(o.data)},fail:e=>{s({code:500,msg:"获取数据失败"})}})})),t=(e,t)=>o(e,"post",t,{"Content-Type":"application/x-www-form-urlencoded"}),a=(e,t)=>o(e,"post",t,{"Content-Type":"application/json"}),n={uploadFile:o=>new Promise(((t,a)=>{let n={};n.Authorization=e.index.getStorageSync("token"),e.index.uploadFile({url:fileUrl,filePath:o,name:"file",formData:{user:"test"},header:n,success:e=>{t(JSON.parse(e.data))},fail:e=>{a({code:500,msg:"获取数据失败"})}})})),request:o,form:t,post:a,loadPostData:(e,o,t)=>{a(e,o).then((e=>{200===e.code&&(t.value=e.data||[])})).catch((e=>{console.log(e)}))},loadFormData:(e,o,a)=>{t(e,o).then((e=>{200===e.code&&(a.value=e.data||[])})).catch((e=>{console.log(e)}))},loadPostCallback:(e,o,t)=>{a(e,o).then((e=>{200===e.code&&t&&t(e)})).catch((e=>{console.log(e)}))}};exports.request=n;
